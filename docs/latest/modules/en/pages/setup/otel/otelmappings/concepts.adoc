ifdef::ss-ff-stackpacks2_enabled[]
= Open Telemetry Mappings Concepts
:revdate: 2025-12-23
:page-revdate: {revdate}
:description: Open Telemetry Mappings Concepts

== Component mappings

An `OtelComponentMapping` describes how a topology component should be created (or updated) from OpenTelemetry data.

Each mapping:

* Selects telemetry using conditions
* Extracts values using expressions
* Produces a single logical component identified by a stable identifier

Multiple telemetry records may resolve to the same component identifier; in that case, the component is merged and refreshed.

Typical examples of components created from OpenTelemetry include:

* Services (derived from `service.name` / `service.namespace`)
* Service instances (derived from `service.instance.id`)
* Databases
* Hosts and Kubernetes resources (nodes, namespaces, pods)
* Functions and tasks in serverless or batch environments

== Relation mappings

An `OtelRelationMapping` describes how a relationship between two components should be created from telemetry data.

Each relation mapping:

* Resolves a sourceId and targetId
* Assigns a relation type
* Produces a directed edge between existing or future components

Relations are materialised once both source and target components exist.

Common examples of relations include:

* Synchronous service calls (client -> server)
* Asynchronous messaging flows (producer -> consumer, consumer -> peer, producer -> peer)
* Service-to-database connections
* Service instance provided-by service
* Execution relationships (service or function executes task, host, or function)

== Expressions and the Common Expression Language (CEL)

Topology mappings rely heavily on the Common Expression Language (CEL) to select telemetry, extract values, and construct component and relation fields.

CEL is a safe, side-effect-free expression language designed for configuration and policy use cases. In the context of OpenTelemetry topology mappings, CEL is used to:

* Define conditions that decide whether a mapping applies
* Compute variables from telemetry attributes
* Build identifiers, names, and tags dynamically

Expressions are evaluated against a well-defined, typed context derived from the OpenTelemetry signal being processed (for example, resource, scope, span, metric, or datapoint).

You do not need prior CEL expertise to get started - most expressions are simple boolean checks, attribute lookups, or string constructions. More advanced expressions can be introduced incrementally as needed.

For a more in-depth description of how to leverage CEL in the topology mappings, view the xref:/setup/otel/otelmappings/schemas.adoc[schemas] page.

endif::ss-ff-stackpacks2_enabled[]
